(function(n){typeof exports=="object"&&typeof module=="object"?n(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],n):n(CodeMirror)})(function(n){"use strict";n.multiplexingMode=function(t){function r(n,t,i,r){var u,f;return typeof t=="string"?(u=n.indexOf(t,i),r&&u>-1?u+t.length:u):(f=t.exec(i?n.slice(i):n),f?f.index+i+(r?f[0].length:0):-1)}var i=Array.prototype.slice.call(arguments,1);return{startState:function(){return{outer:n.startState(t),innerActive:null,inner:null}},copyState:function(i){return{outer:n.copyState(t,i.outer),innerActive:i.innerActive,inner:i.innerActive&&n.copyState(i.innerActive.mode,i.inner)}},token:function(u,f){var c,a,s,v,y,p,e,h,o,l;if(f.innerActive)return(e=f.innerActive,h=u.string,!e.close&&u.sol())?(f.innerActive=f.inner=null,this.token(u,f)):(o=e.close?r(h,e.close,u.pos,e.parseDelimiters):-1,o==u.pos&&!e.parseDelimiters)?(u.match(e.close),f.innerActive=f.inner=null,e.delimStyle&&e.delimStyle+" "+e.delimStyle+"-close"):(o>-1&&(u.string=h.slice(0,o)),l=e.mode.token(u,f.inner),o>-1&&(u.string=h),o==u.pos&&e.parseDelimiters&&(f.innerActive=f.inner=null),e.innerStyle&&(l=l?l+" "+e.innerStyle:e.innerStyle),l);for(c=Infinity,h=u.string,a=0;a<i.length;++a){if(s=i[a],o=r(h,s.open,u.pos),o==u.pos)return s.parseDelimiters||u.match(s.open),f.innerActive=s,v=0,t.indent&&(y=t.indent(f.outer,"",""),y!==n.Pass&&(v=y)),f.inner=n.startState(s.mode,v),s.delimStyle&&s.delimStyle+" "+s.delimStyle+"-open";o!=-1&&o<c&&(c=o)}return c!=Infinity&&(u.string=h.slice(0,c)),p=t.token(u,f.outer),c!=Infinity&&(u.string=h),p},indent:function(i,r,u){var f=i.innerActive?i.innerActive.mode:t;return f.indent?f.indent(i.innerActive?i.inner:i.outer,r,u):n.Pass},blankLine:function(r){var u=r.innerActive?r.innerActive.mode:t,f,e;if(u.blankLine&&u.blankLine(r.innerActive?r.inner:r.outer),r.innerActive)r.innerActive.close==="\n"&&(r.innerActive=r.inner=null);else for(f=0;f<i.length;++f)e=i[f],e.open==="\n"&&(r.innerActive=e,r.inner=n.startState(e.mode,u.indent?u.indent(r.outer,"",""):0))},electricChars:t.electricChars,innerMode:function(n){return n.inner?{state:n.inner,mode:n.innerActive.mode}:{state:n.outer,mode:t}}}}});