layui.use(["form","layer","table","laytpl","laydate"],function(){var f=layui.form,u=parent.layer===undefined?layui.layer:top.layer,t=layui.jquery,e=layui.laytpl,i=layui.table,n=top.initFilter(window),r=layui.laydate;r.render({elem:"#startDate",type:"date",format:"yyyy-MM-dd",min:"2018-1-1",max:"2025-12-31",lang:"cn",theme:"molv",calendar:!0});r.render({elem:"#endDate",type:"date",format:"yyyy-MM-dd",min:"2018-1-1",max:"2025-12-31",lang:"cn",theme:"molv",calendar:!0});i.render({elem:"#table",method:"post",url:"/Admin/Home/GetOperationLogPageData",height:"full-"+n.top,cellMinWidth:90,toolbar:"#toolbar",defaultToolbar:["filter","exports","print"],cols:[[{type:"numbers"},{field:"account",title:"操作员账号"},{field:"nickName",title:"操作员昵称"},{field:"ip",title:"操作员IP地址",width:120},{field:"method",title:"操作方法"},{field:"parameter",title:"操作方法参数"},{field:"desc",title:"操作描述"},{field:"operationType",title:"操作类型",width:100},{field:"createdTime",title:"创建时间",width:160}]],page:{limit:n.limit?n.limit:10,limits:[10,15,20,25],curr:n.page?n.page:1},where:{account:window.hasSuperRole?n.account:"",method:n.method,desc:n.desc,operationType:n.operationType,startDate:n.startDate,endDate:n.endDate},done:function(n,i){t("#page").val(i);t("#limit").val(this.limit);top.changeUrlParam(window);n.success||u.alert("操作失败:"+n.msg,{title:"错误",icon:5})},parseData:function(n){return n.success?n:{code:0,msg:n.msg,count:0,data:[]}}});t("#search").on("click",function(){var r=t("form").serialize().split("&"),n={};for(var u in r)r.hasOwnProperty(u)&&(n[r[u].split("=")[0]]=decodeURIComponent(r[u].split("=")[1]));return i.reload("table",{page:{curr:1},where:{account:window.hasSuperRole?n.account:"",method:n.method,desc:n.desc,operationType:n.operationType,startDate:n.startDate,endDate:n.endDate}}),!0})});