layui.config({base:"/module/"}).extend({treetable:"treetable-lay/treetable"}).use(["form","layer","table","treetable","laytpl"],function(){var r=layui.jquery,n=parent.layer===undefined?layui.layer:top.layer,t=layui.table,i=layui.treetable;i.render({id:"permissionTable",method:"get",toolbar:"#toolbar",treeColIndex:4,treeSpid:-1,treeIdName:"id",treePidName:"parentId",treeDefaultClose:!1,treeLinkage:!0,elem:"#permissionTable",url:"/Admin/Permission/GetAll",page:!1,cols:[[{type:"numbers"},{type:"radio"},{field:"id",title:"权限ID",hide:!0},{field:"parentId",title:"父级ID",hide:!0},{field:"name",title:"名字",minWidth:200},{field:"areaName",title:"区域",minWidth:100},{field:"controllerName",title:"控制器",minWidth:100},{field:"actionName",title:"行为",minWidth:100},{field:"fullName",title:"权限标识",minWidth:180},{field:"url",title:"菜单url",minWidth:180},{field:"sort",align:"left",title:"排序号",width:80},{field:"remark",title:"备注说明"},{field:"icon",title:"图标",align:"left",width:110},{field:"menuTypeDesc",title:"菜单类型",minWidth:100},{field:"topMenuKey",title:"顶级菜单Key",minWidth:120},{field:"createdTime",title:"创建时间",minWidth:100,hide:!0},{field:"updatedTime",title:"更新时间",minWidth:100,hide:!0}]],done:function(){n.closeAll("loading")}});t.on("toolbar(permissionTable)",function(i){var r=t.checkStatus(i.config.id),e,u,f;switch(i.event){case"add":n.open({type:2,title:"添加权限",content:"/Admin/Permission/Add?iframeName="+window.name,skin:"layui-layer-lan",area:["660px","880px"],offset:"auto",shade:.3});break;case"update":if(r.data.length!==1)return n.msg("请选择一个您所需要编辑的项"),!1;u=r.data[0].name;f=r.data[0].id;n.open({type:2,title:"编辑权限-"+u,content:"/Admin/Permission/Edit?iframeName="+window.name+"&id="+f,skin:"layui-layer-lan",area:["660px","880px"],offset:"auto",shade:.3});break;case"field":e=JSON.parse(window.top.sessionStorage.getItem("curmenu"));window.top.addMyTab("/business/esfield/index","ES字段管理",e.topMenuName,e.leftMenuName);break;case"dashboard":if(r.data.length!==1)return n.msg("请选择一个您所需要编辑的项"),!1;u=r.data[0].name;f=r.data[0].id;n.open({type:2,title:"配置Dashboard-"+u,content:"/Business/ESDashboard/Set?iframeName="+window.name+"&id="+f,skin:"layui-layer-lan",area:["1100px","800px"],offset:"auto",shade:.3})}})});