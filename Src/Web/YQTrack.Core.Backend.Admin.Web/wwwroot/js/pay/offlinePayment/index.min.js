layui.use(["form","layer","table","laytpl"],function(){var r=layui.form,u=parent.layer===undefined?layui.layer:top.layer,t=layui.jquery,f=layui.laytpl,i=layui.table,n=top.initFilter(window);i.render({elem:"#table",method:"post",url:"/Pay/OfflinePayment/GetPageData",height:"full-"+n.top,cellMinWidth:60,toolbar:"#toolbar",defaultToolbar:["filter","exports","print"],cols:[[{type:"numbers"},{field:"offlinePaymentId",title:"线下交易ID",hide:!0,width:180},{field:"createAt",title:"申请时间",width:160},{field:"email",title:"注册邮箱"},{field:"purchaseOrderIdList",title:"订单号",templet:function(n){var t="";for(let i in n.purchaseOrderIdList)t+='<a class="layui-table-link" lay-event="viewPurchaseOrder" lay-filter="viewPurchaseOrder" value="'+n.purchaseOrderIdList[i]+'">'+n.purchaseOrderIdList[i]+"<\/a><br>";return t},width:180,align:"center"},{field:"amount",title:"交易金额",templet:function(n){return n.currencyType+n.amount},width:140},{field:"calculateAmount",title:"计算金额",templet:function(n){return n.currencyType+n.calculateAmount},width:140},{field:"transferNo",title:"转账流水号"},{field:"status",title:"状态"},{field:"handleTime",title:"审核时间",width:160,align:"center"},{field:"operate",title:"操作",templet:function(n){return'<a class="layui-btn layui-btn layui-btn-xs" lay-event="view" lay-filter="view" value="'+n.offlinePaymentId+'">详情<\/a>'},width:68}]],page:{limit:n.limit?n.limit:10,limits:[10,15,20,25],curr:n.page?n.page:1},where:{email:n.email,status:n.status},done:function(n,i){t("#page").val(i);t("#limit").val(this.limit);top.changeUrlParam(window)}});t("#search").on("click",function(){var n=decodeURIComponent(t("form").serialize(),!0).split("&"),r={};for(var u in n)r[n[u].split("=")[0]]=n[u].split("=")[1].replace(/\+/g," ");return i.reload("table",{page:{curr:1},where:{email:r.email,status:r.status}}),!0});i.on("tool(table)",function(n){var i=JSON.parse(window.top.sessionStorage.getItem("curmenu"));switch(n.event){case"view":return window.top.addMyTab("/pay/offlinepayment/view?id="+n.data.offlinePaymentId,"线下交易详情",i.topMenuName,i.leftMenuName),!1;case"viewPurchaseOrder":return window.top.addMyTab("/pay/purchaseorder/viewproduct?id="+t(this).attr("value"),"订单详情",i.topMenuName,i.leftMenuName),!1}})});