layui.use(["form","layer","table","laytpl"],function(){function r(){var t="金额";return n("#paymentAnalysisType").val()!=4&&(n("#currencyTypeSel").val()==2?t=n("#exchangeRate").val()==""?"金额($)":"金额(￥)":n("#currencyTypeSel").val()==1?t="金额(￥)":n("#exchangeRate").val()!=""&&(t="金额(￥)")),t}function f(){i.showLoading();n.post("/Pay/Chart/PaymentAmountAnalysis",{paymentAnalysisType:n("#paymentAnalysisType").val(),chartDateType:n("#chartDateType").val(),email:n("#email").val(),paymentProvider:t.value("paymentProviderSel","val"),serviceType:t.value("serviceTypeSel","val"),currencyType:n("#currencyTypeSel").val(),exchangeRate:n("#exchangeRate").val(),platformType:t.value("platformTypeSel","val"),paymentStatus:t.value("paymentStatusSel","val")},function(t){if(!t.success){e.alert("操作失败:"+t.msg,{title:"错误",icon:5});return}let f=t.data;var s=n.extend({},u,{title:{text:f.title},legend:{data:n.map(f.series,function(n){return n.name})},xAxis:{data:f.xAxisData},yAxis:[{type:"value",name:r(),min:0}],series:f.series});i.hideLoading();o(i,s)})}function o(n,t){n.setOption(t,!0)}var s=layui.form,e=parent.layer===undefined?layui.layer:top.layer,n=layui.jquery,h=layui.laytpl,c=layui.table,t=layui.formSelects,i,u;top.initFilter(window,t);i=echarts.init(document.getElementById("paymentChart"),"shine");u={title:{text:""},tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}}},toolbox:{feature:{dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}}},legend:{data:[]},xAxis:[{type:"category",data:[],axisPointer:{type:"shadow"}}],yAxis:[{type:"value",name:r(),min:0}],series:[]};f();n("#search").on("click",function(){n("#paymentChart>div").length>1&&n("#paymentChart>div").eq(2).css("display","none");f();top.changeUrlParam(window)})});