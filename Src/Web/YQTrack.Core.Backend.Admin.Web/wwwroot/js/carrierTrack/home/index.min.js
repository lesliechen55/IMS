layui.use(["form","layer","table","laytpl","jquery"],function(){var u=layui.form,t=parent.layer===undefined?layui.layer:top.layer,i=layui.jquery,f=layui.laytpl,n=layui.table,r=top.initFilter(window),e=n.render({elem:"#table",method:"post",url:"/CarrierTrack/Home/GetPageData/",height:"full-"+r.top,cellMinWidth:90,toolbar:"#toolbar",defaultToolbar:["filter","exports","print"],cols:[[{type:"numbers"},{type:"radio"},{field:"controlId",title:"控制ID",hide:!0},{field:"userId",title:"用户ID"},{field:"userId",title:"用户ID",templet:function(n){return'<a class="layui-table-link" lay-event="viewUser" lay-filter="viewUser">'+n.userId+"<\/a>"},width:180},{field:"email",title:"用户邮箱"},{field:"enable",title:"是否启用",templet:"#enable",width:100},{field:"importTodayLimit",title:"当日导入限制"},{field:"exportTimeLimit",title:"单次导出限制"},{field:"offlineDay",title:"离线天数"},{field:"createTime",title:"创建时间",width:160},{field:"updateTime",title:"更新时间",width:160}]],where:{email:r.email,enable:r.userStatus,offlineDay:r.offlineDay},done:function(){top.changeUrlParam(window)}});n.on("toolbar(table)",function(i){var r=n.checkStatus(i.config.id);switch(i.event){case"add":t.open({type:2,title:"添加用户资料",content:"/CarrierTrack/Home/Add?iframeName="+window.name,skin:"layui-layer-lan",area:["520px","360px"],offset:"auto",shade:.3});break;case"update":if(r.data.length!==1){t.msg("请先选择有且仅有一个用户");return}var u=r.data[0].email,f=r.data[0].controlId,e=r.data[0].userId;t.open({type:2,title:"编辑用户 "+u,content:"/CarrierTrack/Home/Edit?iframeName="+window.name+"&id="+f+"&userId="+e,skin:"layui-layer-lan",area:["520px","400px"],offset:"auto",shade:.3})}});n.on("tool(table)",function(n){switch(n.event){case"viewUser":window.top.addMyTab("/business/user/detail?userId="+n.data.userId,"用户详情","systemcenter","/business/user/index")}});i("#search").on("click",function(){var u=i("#email").val(),f=i("#userStatus").val(),r=i("#offlineDay").val();return r!==""&&parseInt(r)<0?(t.alert("离线天数不能小于0,请重新填写",{title:"错误",icon:5}),!1):(n.reload("table",{where:{email:u,enable:f,offlineDay:r}}),!0)})});