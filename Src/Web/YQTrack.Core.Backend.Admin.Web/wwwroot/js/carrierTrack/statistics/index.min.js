layui.use(["laydate","form","layer","table","laytpl"],function(){function f(){t.showLoading();n.post("/CarrierTrack/Statistics/TrackAnalysis",{chartDateType:n("#chartDateType").val(),email:n("#email").val(),enable:n("#userStatus").val()},function(r){if(!r.success){i.alert("操作失败:"+r.msg,{title:"错误",icon:5});return}let f=r.data;var o=n.extend({},u,{title:{text:f.title},legend:{data:n.map(f.series,function(n){return n.name})},xAxis:{data:f.xAxisData},series:f.series});t.hideLoading();e(t,o)})}function e(n,t){n.clear();n.setOption(t)}var o=layui.form,i=parent.layer===undefined?layui.layer:top.layer,n=layui.jquery,s=layui.laytpl,h=layui.table,c=top.initFilter(window),r=layui.laydate,t,u;r.render({elem:"#startTime",type:"date",format:"yyyy-MM-dd",min:"2019-1-1",max:"2025-12-31",lang:"cn",theme:"molv",calendar:!0});r.render({elem:"#endTime",type:"date",format:"yyyy-MM-dd",min:"2019-1-1",max:"2025-12-31",lang:"cn",theme:"molv",calendar:!0});t=echarts.init(document.getElementById("demo"),"shine");u={title:{text:""},tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}}},toolbox:{feature:{dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}}},legend:{data:[]},xAxis:[{type:"category",data:[],axisPointer:{type:"shadow"}}],yAxis:[{type:"value",name:"数量",min:0}],series:[]};f();n("#search").on("click",function(){n("#demo>div").length>1&&n("#demo>div").eq(2).css("display","none");f();top.changeUrlParam(window)});n("#export").on("click",function(){var t=n(this).prop("href")+"?",r=n("form").serialize().split("&");for(var u in r)r.hasOwnProperty(u)&&(t=t+r[u].split("=")[0]+"="+decodeURIComponent(r[u].split("=")[1]),t=t+"&");return t=t.slice(0,-1),n.fileDownload(t).done(function(){i.msg("文件下载成功请保存到您的电脑上面!",{icon:1})}).fail(function(n){i.open({title:"文件下载失败",content:n})}),!1})});