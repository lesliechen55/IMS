layui.use(["form","layer","jquery"],function(){function r(){var n=window.location.href,t=n.indexOf("ReturnUrl=");return t==-1?"":n.substring(n.indexOf("ReturnUrl=")+10)}var t=layui.form,i=parent.layer===undefined?layui.layer:top.layer,n=layui.jquery;t.verify({account:function(t){var i=t.length;return n.trim(t).length!==i?"用户名错误,不能包含空格":i<1||i>16?"用户名长度错误,不能小于1位,不能大于16位":void 0},password:[/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[$@$!%*?&])[A-Za-z\d$@$!%*?&]{8,16}$/,"密码必须8到16位,最少8个字符至少1个大写字母，1个小写字母，1个数字和1个特殊字符"],code:[/^[\d]{4,4}$/,"验证码必须是4位数字"]});n("#imgCode img").click(function(){n(this).attr("src","/home/GetValidateCode?v="+(new Date).getTime())});t.on("submit(login)",function(t){var u=this;n(this).text("登录中...").attr("disabled","disabled").addClass("layui-disabled");n.post("/home/login",{request:t.field},function(t){if(t.success){var f=r();f=f==""?"/":unescape(f);window.location.href=f}else n("#imgCode img").click(),n(u).text("登录").removeAttr("disabled").removeClass("layui-disabled"),i.alert("登陆失败,错误原因如下:"+t.msg,{title:"错误",icon:5})})});n(".loginBody .input-item").click(function(t){t.stopPropagation();n(this).addClass("layui-input-focus").find(".layui-input").focus()});n(".loginBody .layui-form-item .layui-input").focus(function(){n(this).parent().addClass("layui-input-focus")});n(".loginBody .layui-form-item .layui-input").blur(function(){n(this).parent().removeClass("layui-input-focus");n(this).val()!==""?n(this).parent().addClass("layui-input-active"):n(this).parent().removeClass("layui-input-active")})});