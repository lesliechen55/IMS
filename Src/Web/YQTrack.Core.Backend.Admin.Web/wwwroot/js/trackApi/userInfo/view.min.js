layui.use(["layer","jquery","table","form","laydate"],function(){var e=layui.form,r=parent.layer===undefined?layui.layer:top.layer,n=layui.jquery,u=layui.table,i,t,f;layui.laydate.render({elem:"#invoiceStartTime",type:"month",format:"yyyy-MM",min:"2015-1-1",max:"2050-12-31",lang:"cn",theme:"molv",calendar:!0,done:function(t){var i=n("#invoiceEndTime").val();i&&t&&t>i&&(r.alert("开始日期不能大于结束日期"),n("#invoiceStartTime").val(""))}});layui.laydate.render({elem:"#invoiceEndTime",type:"month",format:"yyyy-MM",min:"2015-1-1",max:"2050-12-31",lang:"cn",theme:"molv",calendar:!0,done:function(t){var i=n("#invoiceStartTime").val();i&&t&&t<i&&(r.alert("开始日期不能大于结束日期"),n("#invoiceEndTime").val(""))}});layui.laydate.render({elem:"#trackCountStartTime",type:"date",format:"yyyy-MM-dd",min:"2015-1-1",max:"2050-12-31",lang:"cn",theme:"molv",calendar:!0,done:function(t){var i=n("#trackCountEndTime").val();i&&t&&t>i&&(r.alert("开始日期不能大于结束日期"),n("#trackCountStartTime").val(""))}});layui.laydate.render({elem:"#trackCountEndTime",type:"date",format:"yyyy-MM-dd",min:"2015-1-1",max:"2050-12-31",lang:"cn",theme:"molv",calendar:!0,done:function(t){var i=n("#trackCountStartTime").val();i&&t&&t<i&&(r.alert("开始日期不能大于结束日期"),n("#trackCountEndTime").val(""))}});i=n("form").serialize().split("&");t={};for(f in i)i.hasOwnProperty(f)&&(t[i[f].split("=")[0]]=decodeURIComponent(i[f].split("=")[1]));u.render({elem:"#invoice",method:"post",url:"/TrackApi/UserInfo/GetUserInvoiceListData",height:"300",where:{userId:t.userId,startTime:t.invoiceStartTime,endTime:t.invoiceEndTime},cols:[[{field:"invoiceId",title:"账单编号",templet:function(n){return'<a class="layui-table-link" href="/trackapi/userinfo/invoicepdf?id='+n.invoiceId+'" target="_blank">'+n.invoiceId+"<\/a>"}},{field:"totalRequest",title:"请求量"},{field:"amount",title:"金额"}]]});n("#invoiceSearch").on("click",function(){var t=n("form").serialize().split("&"),i={};for(var r in t)t.hasOwnProperty(r)&&(i[t[r].split("=")[0]]=decodeURIComponent(t[r].split("=")[1]));return u.reload("invoice",{where:{userId:i.userId,startTime:i.invoiceStartTime,endTime:i.invoiceEndTime}}),!0});u.render({elem:"#trackCount",method:"post",url:"/TrackApi/UserInfo/GetTrackCountListData",height:"300",where:{userId:t.userId,startTime:t.trackCountStartTime,endTime:t.trackCountEndTime},cols:[[{field:"date",title:"日期"},{field:"count",title:"请求量"}]]});n("#trackCountSearch").on("click",function(){var t=n("form").serialize().split("&"),i={};for(var r in t)t.hasOwnProperty(r)&&(i[t[r].split("=")[0]]=decodeURIComponent(t[r].split("=")[1]));return u.reload("trackCount",{where:{userId:i.userId,startTime:i.trackCountStartTime,endTime:i.trackCountEndTime}}),!0});e.on("submit(order)",function(){return window.top.addMyTab("/pay/purchaseorder/index?serviceType=4&userId="+n("#hiUserId").val(),"查看购买记录","paycenter","/pay/purchaseOrder/index"),!1});e.on("submit(config)",function(){var t=JSON.parse(window.top.sessionStorage.getItem("curmenu"));return window.top.addMyTab("/trackapi/userinfo/viewconfig?id="+n("#hiUserNo").val(),"查看用户配置",t.topMenuName,t.leftMenuName),!1})});