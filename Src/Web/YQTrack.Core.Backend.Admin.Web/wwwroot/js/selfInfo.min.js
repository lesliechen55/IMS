layui.use(["layer","jquery","form","upload"],function(){var r=layui.form,t=parent.layer===undefined?layui.layer:top.layer,n=layui.jquery,i=layui.upload,u=i.render({elem:"#upload",url:"/Account/UpdateAvatar",method:"post",accept:"images",auto:!1,bindAction:"#submit",size:2048,multiple:!1,number:1,field:"formFile",drag:!1,acceptMime:"image/jpg, image/png, image/jpeg",done:function(i){return i.success?(t.msg("操作成功,可以刷新界面查看新头像喔"),n("#close").click(),!1):(t.alert("操作失败:"+i.msg,{title:"错误",icon:5}),!1)},error:function(){},choose:function(t){t.preview(function(t,i,r){console.log(t);console.log(i);console.log(r);n("#img").prop("src",r)})},allDone:function(){},before:function(){}});n("#updateNickName").click(function(){var i=n("input[name=nickName]").val().trim();if(i.length<=0||i.length>16){t.msg("昵称不能为空且不能超过16个字符");return}n.post("/Account/UpdateNickName",{nickName:i},function(n){return n.success?(t.msg("操作成功"),!1):(t.alert("操作失败:"+n.msg,{title:"错误",icon:5}),!1)})});n("#close").click(function(){var n=parent.layer.getFrameIndex(window.name);parent.layer.close(n)})});