window.localStorage.setItem("cache",window.localStorage.getItem("cache")==null?"true":window.localStorage.getItem("cache"));var cacheStr=window.localStorage.getItem("cache");layui.use(["form","jquery","layer"],function(){function r(){var t=window.localStorage.getItem("skin");t&&(window.localStorage.getItem("skinValue")!="自定义"?n("body").addClass(window.localStorage.getItem("skin")):(n(".layui-layout-admin .layui-header").css("background-color",t.split(",")[0]),n(".layui-bg-black").css("background-color",t.split(",")[1]),n(".hideMenu").css("background-color",t.split(",")[2])))}var t=layui.form,n=layui.jquery,i=parent.layer===undefined?layui.layer:top.layer;n(".signOut").click(function(){window.sessionStorage.removeItem("menu");menu=[];window.sessionStorage.removeItem("curmenu");location.href="/home/logout"});n(".functionSetting").click(function(){return i.open({title:"功能设定",area:["380px","230px"],type:"1",content:'<div class="functionSrtting_box"><form class="layui-form"><div class="layui-form-item"><label class="layui-form-label">开启Tab缓存<\/label><div class="layui-input-block"><input type="checkbox" name="cache" lay-skin="switch" lay-text="开|关"><div class="layui-word-aux">开启后刷新页面不关闭打开的Tab页<\/div><\/div><\/div><div class="layui-form-item"><label class="layui-form-label">Tab切换刷新<\/label><div class="layui-input-block"><input type="checkbox" name="changeRefresh" lay-skin="switch" lay-text="开|关"><div class="layui-word-aux">开启后切换窗口刷新当前页面<\/div><\/div><\/div><div class="layui-form-item skinBtn"><a href="javascript:;" class="layui-btn layui-btn-sm layui-btn-normal" lay-submit="" lay-filter="settingSuccess">设定完成<\/a><a href="javascript:;" class="layui-btn layui-btn-sm layui-btn-primary" lay-submit="" lay-filter="noSetting">朕再想想<\/a><\/div><\/form><\/div>',success:function(){n(".functionSrtting_box input[name=cache]").prop("checked",cacheStr=="true"?!0:!1);n(".functionSrtting_box input[name=changeRefresh]").prop("checked",changeRefreshStr=="true"?!0:!1);t.on("submit(settingSuccess)",function(n){return window.localStorage.setItem("cache",n.field.cache=="on"?"true":"false"),window.localStorage.setItem("changeRefresh",n.field.changeRefresh=="on"?"true":"false"),window.sessionStorage.removeItem("menu"),window.sessionStorage.removeItem("curmenu"),location.reload(),!1});t.on("submit(noSetting)",function(){i.closeAll("page")});t.render()}}),!1});window.localStorage.getItem("systemParameter")&&(systemParameter=JSON.parse(window.localStorage.getItem("systemParameter")),n(".footer p span").text(systemParameter.powerby));r();n(".changeSkin").click(function(){return i.open({title:"更换皮肤",area:["310px","280px"],type:"1",content:'<div class="skins_box"><form class="layui-form"><div class="layui-form-item"><input type="radio" name="skin" value="默认" title="默认" lay-filter="default" checked=""><input type="radio" name="skin" value="橙色" title="橙色" lay-filter="orange"><input type="radio" name="skin" value="蓝色" title="蓝色" lay-filter="blue"><input type="radio" name="skin" value="自定义" title="自定义" lay-filter="custom"><div class="skinCustom"><input type="text" class="layui-input topColor" name="topSkin" placeholder="顶部颜色" /><input type="text" class="layui-input leftColor" name="leftSkin" placeholder="左侧颜色" /><input type="text" class="layui-input menuColor" name="btnSkin" placeholder="顶部菜单按钮" /><\/div><\/div><div class="layui-form-item skinBtn"><a href="javascript:;" class="layui-btn layui-btn-sm layui-btn-normal" lay-submit="" lay-filter="changeSkin">确定更换<\/a><a href="javascript:;" class="layui-btn layui-btn-sm layui-btn-primary" lay-submit="" lay-filter="noChangeSkin">朕再想想<\/a><\/div><\/form><\/div>',success:function(){var f=window.localStorage.getItem("skin"),e,u;window.localStorage.getItem("skinValue")&&n(".skins_box input[value="+window.localStorage.getItem("skinValue")+"]").attr("checked","checked");n(".skins_box input[value=自定义]").attr("checked")&&(n(".skinCustom").css("visibility","inherit"),n(".topColor").val(f.split(",")[0]),n(".leftColor").val(f.split(",")[1]),n(".menuColor").val(f.split(",")[2]));t.render();n(".skins_box").removeClass("layui-hide");n(".skins_box .layui-form-radio").on("click",function(){var t;n(this).find("div").text()=="橙色"?t="orange":n(this).find("div").text()=="蓝色"?t="blue":n(this).find("div").text()=="默认"&&(t="");n(this).find("div").text()!="自定义"?(n(".topColor,.leftColor,.menuColor").val(""),n("body").removeAttr("class").addClass("main_body "+t+""),n(".skinCustom").removeAttr("style"),n(".layui-bg-black,.hideMenu,.layui-layout-admin .layui-header").removeAttr("style")):n(".skinCustom").css("visibility","inherit")});n(".topColor").blur(function(){n(".layui-layout-admin .layui-header").css("background-color",n(this).val()+" !important")});n(".leftColor").blur(function(){n(".layui-bg-black").css("background-color",n(this).val()+" !important")});n(".menuColor").blur(function(){n(".hideMenu").css("background-color",n(this).val()+" !important")});t.on("submit(changeSkin)",function(t){t.field.skin!="自定义"?(t.field.skin=="橙色"?u="orange":t.field.skin=="蓝色"?u="blue":t.field.skin=="默认"&&(u=""),window.localStorage.setItem("skin",u)):(e=n(".topColor").val()+","+n(".leftColor").val()+","+n(".menuColor").val(),window.localStorage.setItem("skin",e),n("body").removeAttr("class").addClass("main_body"));window.localStorage.setItem("skinValue",t.field.skin);i.closeAll("page")});t.on("submit(noChangeSkin)",function(){n("body").removeAttr("class").addClass("main_body "+window.localStorage.getItem("skin")+"");n(".layui-bg-black,.hideMenu,.layui-layout-admin .layui-header").removeAttr("style");r();i.closeAll("page")})},cancel:function(){n("body").removeAttr("class").addClass("main_body "+window.localStorage.getItem("skin")+"");n(".layui-bg-black,.hideMenu,.layui-layout-admin .layui-header").removeAttr("style");r()}}),!1})});