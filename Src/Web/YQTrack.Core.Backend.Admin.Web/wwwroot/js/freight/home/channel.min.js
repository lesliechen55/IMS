layui.use(["laydate","form","layer","table","laytpl"],function(){var f=layui.form,r=parent.layer===undefined?layui.layer:top.layer,t=layui.jquery,e=layui.laytpl,u=layui.table,n=top.initFilter(window),i=layui.laydate;i.render({elem:"#publishStartTime",type:"date",format:"yyyy-MM-dd",min:"2018-1-1",max:"2025-12-31",lang:"cn",theme:"molv",calendar:!0});i.render({elem:"#publishEndTime",type:"date",format:"yyyy-MM-dd",min:"2018-1-1",max:"2025-12-31",lang:"cn",theme:"molv",calendar:!0});i.render({elem:"#expireStartTime",type:"date",format:"yyyy-MM-dd",min:"2018-1-1",max:"2025-12-31",lang:"cn",theme:"molv",calendar:!0});i.render({elem:"#expireEndTime",type:"date",format:"yyyy-MM-dd",min:"2018-1-1",max:"2025-12-31",lang:"cn",theme:"molv",calendar:!0});u.render({elem:"#table",method:"post",url:"/Freight/Channel/GetChannelPageData",height:"full-"+n.top,cellMinWidth:60,toolbar:"#toolbar",defaultToolbar:["filter","exports","print"],cols:[[{type:"numbers"},{field:"channelTitle",title:"渠道名称"},{field:"channelId",title:"渠道ID"},{field:"productType",title:"产品类型"},{field:"minDay",title:"最小天数"},{field:"maxDay",title:"最大天数"},{field:"citys",title:"揽件城市"},{field:"countrys",title:"派送国家"},{field:"limitWeight",title:"限重(g)"},{field:"operateCost",title:"操作费"},{field:"firstWeight",title:"首重(g)"},{field:"firstPrice",title:"首重价格"},{field:"freightType",title:"报价类型"},{field:"freightIntervals",title:"报价区间"},{field:"companyName",title:"运输商"},{field:"publishTime",title:"发布时间"},{field:"state",title:"渠道状态"},{field:"expireTime",title:"过期时间"},{field:"validReportTimes",title:"有效举报次数"}]],parseData:function(n){return n.success?n:{code:0,msg:n.msg,count:0,data:[]}},page:{limit:n.limit?n.limit:10,limits:[10,15,20,25],curr:n.page?n.page:1},where:{id:n.id,name:n.name,publishStartTime:n.publishStartTime,publishEndTime:n.publishEndTime,expireStartTime:n.expireStartTime,expireEndTime:n.expireEndTime,status:n.status},done:function(n,i){t("#page").val(i);t("#limit").val(this.limit);top.changeUrlParam(window);n.success||r.alert("操作失败:"+n.msg,{title:"错误",icon:5})}});t("#search").on("click",function(){var i=t("form").serialize().split("&"),n={};for(var r in i)i.hasOwnProperty(r)&&(n[i[r].split("=")[0]]=decodeURIComponent(i[r].split("=")[1]));return u.reload("table",{page:{curr:1},where:{id:n.id,name:n.name,publishStartTime:n.publishStartTime,publishEndTime:n.publishEndTime,expireStartTime:n.expireStartTime,expireEndTime:n.expireEndTime,status:n.status}}),!0});t("#export").on("click",function(){var n=t(this).prop("href")+"?",i=t("form").serialize().split("&");for(var u in i)i.hasOwnProperty(u)&&(n=n+i[u].split("=")[0]+"="+decodeURIComponent(i[u].split("=")[1]),n=n+"&");return n=n.slice(0,-1),t.fileDownload(n).done(function(){r.msg("文件下载成功请保存到您的电脑上面!",{icon:1})}).fail(function(n){r.open({title:"文件下载失败",content:n})}),!1})});