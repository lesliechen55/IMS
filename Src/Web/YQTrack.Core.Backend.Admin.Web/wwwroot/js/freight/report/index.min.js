layui.use(["form","layer","table","laytpl"],function(){var u=layui.form,r=parent.layer===undefined?layui.layer:top.layer,t=layui.jquery,f=layui.laytpl,i=layui.table,n=top.initFilter(window);i.render({elem:"#table",method:"post",url:"/Freight/Report/GetReportPageData",height:"full-"+n.top,cellMinWidth:60,toolbar:"#toolbar",defaultToolbar:["filter","exports","print"],cols:[[{type:"numbers"},{type:"radio"},{field:"id",title:"举报记录ID"},{field:"channelTitle",title:"渠道名称"},{field:"companyName",title:"公司名称"},{field:"reasonType",title:"举报类型"},{field:"detail",title:"举报详情"},{field:"reportEmail",title:"举报人邮箱"},{field:"reportTime",title:"举报时间"},{field:"processStatus",title:"处理状态"},{field:"processTime",title:"处理时间"},{field:"processRemark",title:"备注"},{field:"processDescription",title:"处理描述(用于邮件发送)"}]],page:{limit:n.limit?n.limit:10,limits:[10,15,20,25],curr:n.page?n.page:1},where:{channelName:n.channelName,companyName:n.companyName,processReportStatus:n.processReportStatus},done:function(n,i){t("#page").val(i);t("#limit").val(this.limit);top.changeUrlParam(window)}});i.on("toolbar(table)",function(n){var t=i.checkStatus(n.config.id),u,f;if(t.data.length!==1){r.msg("请先选择有且仅有一条举报记录");return}u=t.data[0].channelTitle;f=t.data[0].id;switch(n.event){case"process":r.open({type:2,title:"处理渠道举报: "+u,content:"/Freight/Report/Process?iframeName="+window.name+"&id="+f,skin:"layui-layer-lan",area:["550px","400px"],offset:"auto",shade:.3,maxmin:!1})}});t("#search").on("click",function(){var n=t("form").serialize().split("&"),r={};for(var u in n)n.hasOwnProperty(u)&&(r[n[u].split("=")[0]]=decodeURIComponent(n[u].split("=")[1]));return i.reload("table",{page:{curr:1},where:{channelName:r.channelName,companyName:r.companyName,processReportStatus:r.processReportStatus}}),!0})});