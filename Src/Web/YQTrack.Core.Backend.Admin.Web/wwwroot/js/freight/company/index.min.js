layui.use(["form","layer","table","laytpl"],function(){var u=layui.form,r=parent.layer===undefined?layui.layer:top.layer,i=layui.jquery,f=layui.laytpl,t=layui.table,n=top.initFilter(window);t.render({elem:"#table",method:"post",url:"/Freight/Company/GetCompanyPageData",height:"full-"+n.top,cellMinWidth:60,toolbar:"#toolbar",defaultToolbar:["filter","exports","print"],cols:[[{type:"numbers"},{type:"radio"},{field:"companyId",title:"公司ID"},{field:"userId",title:"用户ID",templet:function(n){return n.userId=="0"?n.userId:'<a class="layui-table-link" lay-event="viewUser" lay-filter="viewUser">'+n.userId+"<\/a>"},width:180},{field:"companyName",title:"公司名称"},{field:"contact",title:"联系人"},{field:"email",title:"邮箱"},{field:"mobile",title:"手机号码"},{field:"area",title:"地区代码"},{field:"address",title:"企业地址"},{field:"code",title:"社会信用代码"},{field:"url",title:"官网",templet:'<div><a target="_blank" href="{{d.url}}" class="layui-table-link">{{d.url}}<\/a><\/div>'},{field:"checkDescHistory",title:"驳回原因(累积)"},{field:"createTime",title:"创建时间"},{field:"updateTime",title:"更新时间"},{field:"checkState",title:"审核状态"},{field:"channelValidReportTimes",title:"有效举报次数"}]],page:{limit:n.limit?n.limit:10,limits:[10,15,20,25],curr:n.page?n.page:1},where:{companyName:n.companyName,email:n.email,status:n.status},done:function(n,t){i("#page").val(t);i("#limit").val(this.limit);top.changeUrlParam(window)}});t.on("toolbar(table)",function(n){var i=t.checkStatus(n.config.id),u,f,e;if(i.data.length!==1){r.msg("请先选择有且仅有一个运输商");return}u=i.data[0].companyName;f=i.data[0].companyId;switch(n.event){case"viewCheck":e=JSON.parse(window.top.sessionStorage.getItem("curmenu"));window.top.addMyTab("/freight/company/viewcheck?iframeName="+window.name+"&id="+f,"查看审核运输商-"+u,e.topMenuName,e.leftMenuName);break;case"update":r.open({type:2,title:"修改资料 "+u,content:"/Freight/Company/Edit?iframeName="+window.name+"&id="+f,skin:"layui-layer-lan",area:["500px","360px"],offset:"auto",shade:.3})}});t.on("tool(table)",function(n){switch(n.event){case"viewUser":window.top.addMyTab("/business/user/detail?userId="+n.data.userId,"用户详情","systemcenter","/business/user/index")}});i("#search").on("click",function(){var n=i("form").serialize().split("&"),r={};for(var u in n)n.hasOwnProperty(u)&&(r[n[u].split("=")[0]]=decodeURIComponent(n[u].split("=")[1]));return t.reload("table",{page:{curr:1},where:{companyName:r.companyName,email:r.email,status:r.status}}),!0})});